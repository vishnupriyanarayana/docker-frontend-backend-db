pipeline {
    environment {
        dockerimagename = 'vishnupriya772002/frontend'
        dockerImage = ''
    }
    agent any

    stages {

        stage ('Git checkout') {
            steps {
                git 'https://github.com/vishnupriyanarayana/docker-frontend-backend-db.git'
            }
        }

        stage ('Build image') {
            steps {
                script {
                    //dockerImage = docker.build dockerimagename
                    sh 'docker build -t vishnupriya772002/frontend .' 
                }
            }
        }
        stage ('pushing image') {
            environment {
                DOCKER_REGISTRY_USER = credentials("DockerRegistryUserName")
                DOCKER_REGISTRY_PASS = credentials("DockerRegistryPassword")
            }
            steps {
                script {
                    //dockerImage.push("latest")
                    sh 'docker push vishnupriya772002/frontend("latest")'
                }
            }
        }
    }  

}